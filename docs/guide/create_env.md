# è¦è‡´å¯Œï¼Œå…ˆæ’¸æ ‘

> ç½—é©¬ä¸æ˜¯ä¸€å¤œå»ºæˆï¼Œæœºå™¨äººä¹Ÿä¸æ˜¯ä¸€æ—¥é€ å¥½ã€‚â€”â€” :older_man:

## æ³¨æ„äº‹é¡¹

1. **æœ¬æ–‡æ¡£å°†ä¼šé»˜è®¤ä½ è‡³å°‘å­¦è¿‡ä¸€ç‚¹ç‚¹ `Python`ï¼Œå‡è®¾ä½ è¿ Python éƒ½ä¸ä¼šï¼Œå»ºè®®è‡³å°‘å­¦ç‚¹ Python åŸºç¡€å†æ¥çœ‹ã€‚**
2. **æœ¬æ–‡æ¡£å°†å‡è®¾ä½ å…·æœ‰ä¸€å®šçš„è‹±è¯­é˜…è¯»èƒ½åŠ›<curtain>é€šè¿‡ XX ç¿»è¯‘ä¹Ÿè¡Œ</curtain>ï¼Œå¹¶èƒ½å¯¹å·¥å…·è½¯ä»¶çš„æç¤ºä½œå‡ºè‡ªå·±çš„å†³å®šã€‚**
3. **æœ¬æ–‡æ¡£å°†ä¼šä½¿ç”¨ `PDM` ä½œä¸ºä¾èµ–å’Œè™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ã€‚**
   :::warning
   å…³äºä¸ºä»€ä¹ˆç”¨ `PDM`ï¼Œä½ å¯ä»¥çœ‹è¿™é‡Œ :point_right: [çœ‹è¿™](/before/QA#_6-python-åŒ…ç®¡ç†å™¨çš„é€‰æ‹©)
   :::

4. **æœ¬æ–‡æ¡£å°†ä½¿ç”¨ `Graia Ariadne` 0.7.15 åŠä»¥ä¸Šçš„ç‰ˆæœ¬**ï¼ŒAriadne åœ¨ 0.7.0 è¿›è¡Œäº†ä¸€æ¬¡å¤§çš„
   Breaking Changeï¼Œå› æ­¤æœ¬æ–‡æ¡£ä¸é€‚ç”¨ 0.7.0 ä»¥ä¸‹çš„ Ariadneï¼Œä¹Ÿä¸å†æä¾›æ—§ç‰ˆçš„ä½¿ç”¨æ–¹æ³•åŠç¤ºä¾‹ã€‚

   :::tip å°è´´å£«ï¼ˆbushiï¼‰

   - ä» 0.5.x å’Œ 0.6.x ç‰ˆæœ¬çš„ Ariadne è¿ç§»è‡³ 0.7.x è¯·å‚è€ƒ[è¿™é‡Œ](https://graia.cn/ariadne/migrate/amnesia_port/)
   - **0.7.6 åŠä»¥ä¸‹ç‰ˆæœ¬çš„ Ariadne å­˜åœ¨ä¸€äº› Bugï¼Œä¸æ¨èä½¿ç”¨å™¢ã€‚**
   - **0.7.15 çš„ Ariadne ä¸èƒ½è‡ªå·±åˆ›å»º loop å’Œ bcc äº†ï¼Œæ‰€ä»¥æœ¬æ–‡æ¡£çš„æ‰€ç”¨çš„ Ariadne ç‰ˆæœ¬ä¸º 0.7.15+**
   - æœ‰å…³ä»€ä¹ˆæ˜¯ Ariadneï¼Œè¯·å‚é˜…[è¿™é‡Œ](/before/QA#_2-ä»€ä¹ˆæ˜¯-ariadne)
   - ä¸€èˆ¬æƒ…å†µä¸‹æœ¬æ–‡æ¡£ä¼šéšç€ **Ariadne** ç‰ˆæœ¬çš„æ›´æ–°è€Œæ›´æ–°ï¼Œæ‰€ä»¥**å¼ºçƒˆæ¨è**ä½ ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼ˆlatestï¼‰ï¼Œç°åœ¨ **Ariadne** çš„æœ€æ–°ç‰ˆæœ¬ä¸º
     <a href="https://pypi.org/project/graia-ariadne/#history"><img src="https://img.shields.io/pypi/v/graia-ariadne?color=2970b6&amp;label=&amp;style=flat-square" alt="PyPIç‰ˆæœ¬" style="display:inline;vertical-align:text-bottom"></a>

   :::

5. è™½ç„¶ `Ariadne` æ”¯æŒ
   <img src="https://img.shields.io/pypi/pyversions/graia-ariadne?color=2970b6&amp;label=Python&amp;style=flat-square" alt="Pythonç‰ˆæœ¬" style="display:inline;vertical-align:text-bottom">
   ï¼Œä½†ä¸ºäº†**æœ€ä½³ä½“éªŒ**ï¼Œæˆ‘ä»¬å»ºè®®ä½ æœ€å¥½å‡çº§åˆ° `Python3.9+` ä»¥ä¿è¯èƒ½å¤Ÿäº«å—åˆ°å…¨éƒ¨åŠŸèƒ½ã€‚
6. **æœ¬æ–‡æ¡£éƒ¨åˆ†å†…å®¹å¯èƒ½æœªåŠæ—¶æ›´æ–°æˆ–ä¸å…¨**ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨æœ¬æ–‡æ¡£çš„ä¸€äº›é¡µé¢è§åˆ°å¦‚ä¸‹çš„æç¤ºæ¡†ï¼Œä»–ä»¬é€šå¸¸æŒ‡å‘ç›¸å…³çš„æ–‡æ¡£/ç¤ºä¾‹ã€‚
   :::interlink
   <https://graia.cn/ariadne/>
   :::

## åˆ›å»ºé¡¹ç›®

æ–°å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å« `EroEroBot` å§ ï¼ˆ<curtain>PeroPero éœ‡æ€’</curtain>ï¼‰

:::interlink EroEroBot
æœ¬ç« å®Œæ•´ç¤ºä¾‹å¯åœ¨ [EroEroBot/main-base.py](https://github.com/GraiaCommunity/EroEroBot/blob/master/main-base.py) æ‰¾åˆ°ã€‚  
ä½ å¯ä»¥åœ¨[æ­¤å¤„](https://github.com/GraiaCommunity/EroEroBot/releases/tag/release)ä¸‹è½½é¢„é…ç½®å¥½çš„æ¨¡æ¿ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰ã€‚
:::

åˆ›å»ºå¥½åè¿›å…¥è¯¥æ–‡ä»¶å¤¹å†…ï¼š

```sh
# è¿™ä¸ªæ˜¯ Linux ç¯å¢ƒä¸‹é€šè¿‡ç»ˆç«¯åˆ›å»ºå¹¶è¿›å…¥æ–‡ä»¶å¤¹çš„å‘½ä»¤
mkdir EroEroBot
cd EroEroBot
```

å¦‚æœä½ æ˜¯ Windows ç”¨æˆ·

1. åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ `EroEroBot`ï¼ˆåˆ«è·Ÿæˆ‘è¯´ä½ è¿è¿™ä¸ªéƒ½ä¸ä¼šï¼‰
2. è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼ŒåŒæ—¶æŒ‰ä¸‹ `Shift` å’Œ é¼ æ ‡å³é”®ï¼Œé€‰æ‹© `åœ¨æ­¤å¤„æ‰“å¼€ Powershell çª—å£`  
   å¦‚æœæ˜¯ Windows 11 ç”¨æˆ·ä¸”å®‰è£…æœ‰ Windows Terminalï¼Œå¯ç›´æ¥å³é”®ï¼Œé€‰æ‹© `åœ¨ç»ˆç«¯ä¸­æ‰“å¼€`

:::warning

ç„¶åè¾“å…¥ `pdm init` å¼€å§‹åˆ›å»ºç¯å¢ƒï¼Œä½ å°±ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æç¤ºï¼š

> è¿‡é•¿çš„è¡Œè¯·æ‰‹åŠ¨å¾€å³æ»šåŠ¨æŸ¥çœ‹

```sh
â¯ pdm init
Creating a pyproject.toml for PDM...
Would you like to create a virtualenv with C:\Users\GraiaX\AppData\Local\Programs\Python\Python311\python.EXE? [y/n]
(y): y # è¾“å…¥ y å¹¶æŒ‰ä¸‹å›è½¦ä»¥ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒä¸­çš„ Python åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
Virtualenv is created successfully at D:\Projects\PythonProjects\EroEroBot\.venv
Is the project a library that is installable?
If yes, we will need to ask a few more questions to include the project name and build backend [y/n] (n): y # è¾“å…¥ y å¹¶æŒ‰ä¸‹å›è½¦
Project name (EroEroBot): # é¡¹ç›®åç§°ã€‚é»˜è®¤ä½¿ç”¨ç»™å½“å‰æ–‡ä»¶å¤¹çš„åå­—ï¼Œæ‰€ä»¥ç›´æ¥æŒ‰ä¸‹å›è½¦å³å¯
Project version (0.1.0): # é¡¹ç›®ç‰ˆæœ¬ã€‚å¦‚æ— ç‰¹æ®Šéœ€è¦ä¿æŒé»˜è®¤ç›´æ¥æŒ‰ä¸‹å›è½¦å³å¯
Project description ( ): # é¡¹ç›®æè¿°ã€‚å¦‚æ— ç‰¹æ®Šéœ€è¦ä¿æŒé»˜è®¤ç›´æ¥æŒ‰ä¸‹å›è½¦å³å¯
Which build backend to use?
0. pdm-backend
1. setuptools
2. flit-core
3. hatchling
4. pdm-pep517
Please select (0): # é€‰æ‹©æ„å»ºå™¨ã€‚å¦‚æ— ç‰¹æ®Šéœ€è¦ä¿æŒé»˜è®¤ç›´æ¥æŒ‰ä¸‹å›è½¦å³å¯
License(SPDX name) (MIT): AGPL-3.0-Only
# è¾“å…¥é¡¹ç›®çš„å¼€æºåè®®ï¼Œç”±äº Graia Project çš„éƒ¨åˆ†åŒ…ä»¥åŠ Mirai éƒ½ä¸º AGPL3 åè®®ä¸” GPL å…·æœ‰ä¼ æŸ“æ€§ï¼Œå› æ­¤æˆ‘ä»¬è¿™é‡Œä¹Ÿè¦ä½¿ç”¨ AGPL3ï¼Œè¾“å…¥ `AGPL-3.0-Only` å¹¶æŒ‰ä¸‹å›è½¦
Author name (GraiaCommunity): # ä½œè€…åç§°ã€‚è¯·å°½é‡ä¸è¦ä½¿ç”¨ä¸­æ–‡
Author email (admin@graiax.cn): # ä½œè€…é‚®ç®±
Python requires('*' to allow any) (>=3.11): # é¡¹ç›®çš„ Python ç‰ˆæœ¬ã€‚å¦‚æ— ç‰¹æ®Šéœ€è¦ä¿æŒé»˜è®¤ç›´æ¥æŒ‰ä¸‹å›è½¦å³å¯
Project is initialized successfully # è‡³æ­¤ï¼Œä¸€ä¸ªåŸºäº PDM ç®¡ç†ä¾èµ–çš„ Python é¡¹ç›®ä¾¿åˆå§‹åŒ–å®Œæ¯•
```

å®Œæˆä¹‹åï¼Œä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹å†…åº”è¯¥ä¼šå‡ºç°ä¸€ä¸ª `pyproject.toml` æ–‡ä»¶ã€‚

:::tip
ä¸ºäº†é˜²æ­¢åç»­æ·»åŠ ä¾èµ–æ—¶ç­‰å¾…å¤ªä¹…ï¼Œå¯ä»¥ä¿®æ”¹ `pyproject.toml` æ¥æ·»åŠ å›½å†…é•œåƒåŠ é€Ÿç«™ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶åæ·»åŠ å¦‚ä¸‹å†…å®¹å³å¯ï¼š

```toml
[[tool.pdm.source]]
# è¿™é‡Œä»¥æ¸…åæºä¸¾ä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æº
name = "tuna-tsinghua"
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
verify_ssl = true
```

æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ `pdm config pypi.url https://pypi.tuna.tsinghua.edu.cn/simple`
ä¸ºæ‰€æœ‰ä½¿ç”¨ PDM ç®¡ç†çš„é¡¹ç›®è®¾ç½®å…¨å±€çš„é•œåƒæºã€‚
:::

## å¯ç”¨è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£… `Graia Ariadne`

åœ¨é…ç½®å¥½ç¯å¢ƒä¹‹åï¼Œä½ éœ€è¦ç»™ä½ çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£… **Graia Ariadne**ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```sh
pdm add graia-ariadne[standard]
```

:::tip

- `graia-ariadne[graia]`
  - `graia-saya` â€”â€” æ¨¡å—åŒ–ï¼ˆ[ä¸œè¥¿è¦åˆ†ç±»å¥½](/guide/saya.md)ï¼‰
  - `graia-scheduler` â€”â€” å®šæ—¶ä»»åŠ¡ï¼ˆ[å“¦å—¨å“Ÿï¼Œæ¬§å°¼é…±](/guide/scheduler.md)ï¼‰ï¼‰
- `graia-ariadne[standard]` æˆ– `graia-ariadne[full]`
  - `richuru`
  - `graia-saya` â€”â€” æ¨¡å—åŒ–ï¼ˆ[ä¸œè¥¿è¦åˆ†ç±»å¥½](/guide/saya.md)ï¼‰
  - `graia-scheduler` â€”â€” å®šæ—¶ä»»åŠ¡ï¼ˆ[å“¦å—¨å“Ÿï¼Œæ¬§å°¼é…±](/guide/scheduler.md)ï¼‰
- `graia-ariadne[fastapi]`
  - `uvicorn[standard]`
  - `fastapi`

:::

::::details å‘½ä»¤è¾“å‡º

```sh
â¯ pdm add graia-ariadne[standard]
Adding packages to default dependencies: graia-ariadne
ğŸ”’ Lock successful
Changes are written to pyproject.toml.
Synchronizing working set with lock file: 34 to add, 0 to update, 0 to remove

  âœ” Install async-timeout 4.0.2 successful
  âœ” Install colorama 0.4.6 successful
  âœ” Install aiosignal 1.3.1 successful
  âœ” Install creart 0.2.2 successful
  âœ” Install attrs 23.1.0 successful
  âœ” Install croniter 1.4.1 successful
  âœ” Install charset-normalizer 3.2.0 successful
  âœ” Install creart-graia 0.1.5 successful
  âœ” Install graia-broadcast 0.22.1 successful
  âœ” Install idna 3.4 successful
  âœ” Install graia-saya 0.0.17 successful
  âœ” Install frozenlist 1.4.0 successful
  âœ” Install importlib-metadata 6.8.0 successful
  âœ” Install graia-amnesia 0.7.1 successful
  âœ” Install graia-ariadne 0.11.5 successful
  âœ” Install graia-scheduler 0.1.5 successful
  âœ” Install mdurl 0.1.2 successful
  âœ” Install loguru 0.6.0 successful
  âœ” Install launart 0.6.3 successful
  âœ” Install markdown-it-py 3.0.0 successful
  âœ” Install aiohttp 3.8.5 successful
  âœ” Install packaging 23.1 successful
  âœ” Install python-dateutil 2.8.2 successful
  âœ” Install richuru 0.1.1 successful
  âœ” Install six 1.16.0 successful
  âœ” Install typing-extensions 4.7.1 successful
  âœ” Install rich 13.5.2 successful
  âœ” Install win32-setctime 1.1.0 successful
  âœ” Install statv 0.3.2 successful
  âœ” Install zipp 3.16.2 successful
  âœ” Install pygments 2.15.1 successful
  âœ” Install multidict 6.0.4 successful
  âœ” Install pydantic 1.10.12 successful
  âœ” Install yarl 1.9.2 successful
Installing the project as an editable package...
  âœ” Install EroEroBot 0.1.0 successful

ğŸ‰ All complete!

```

::::
